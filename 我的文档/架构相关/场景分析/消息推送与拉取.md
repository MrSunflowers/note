在开发类似于微博或微信朋友圈的消息群发场景下，消息如何发送到每个相关用户的问题

在该类场景下，通常有几种主流的解决方案，即

- 以消息队列为主体的推送模式
- 以客户端定时发送请求拉取的主动拉取模式
- 以上两种模式混合的混合模式

它们各自存在各自的问题

推送模式

如果一个人的粉丝或朋友数量过多，则会造成大量消息同时发往消息队列，导致服务器 IO 被瞬间打满，影响服务的稳定性，也是微信朋友最多只能有 500 个的原因

拉取模式

如果一个人的粉丝或朋友数量过多，则会造成大量请求同时发往服务器，导致服务器宕机，早期的微博使用该模式热点新闻导致微博宕机

混合模式

实时分析计算用户关联的用户数量，来动态决定使用何种模式，推特使用该模式实现

